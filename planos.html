<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Agenda Clena ‚Ä¢ Planos e Assinatura</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
/* === SEU CSS ORIGINAL ‚Äî INTACTO === */
:root{
  --primary:#ff6a00;
  --primary-dark:#e55d00;
  --accent:#b8ff65;
  --text:#1f2937;
  --muted:#6b7280;
  --bg:#f6f7fb;
  --card:#ffffff;
  --border:#e5e7eb;
  --radius:22px;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}
body{background:#fff;color:var(--text)}
header{position:sticky;top:0;z-index:100;background:#fff;border-bottom:1px solid var(--border)}
.header{max-width:1200px;margin:auto;padding:16px 20px;display:flex;align-items:center;justify-content:space-between}
.logo{font-size:22px;font-weight:800;color:var(--primary)}
nav{display:flex;gap:26px}
nav a{text-decoration:none;color:#111;font-weight:500}
.actions{display:flex;gap:12px}
.btn{padding:12px 22px;border-radius:999px;font-weight:700;border:none;cursor:pointer;font-size:14px}
.btn-primary{background:var(--accent)}
.btn-outline{background:#fff;border:1px solid var(--border)}
.hero{max-width:1200px;margin:auto;padding:90px 20px 70px;text-align:center}
.hero h1{font-size:48px;margin-bottom:18px}
.hero h1 span{color:var(--primary)}
.hero p{font-size:18px;color:var(--muted);max-width:760px;margin:0 auto}
.section{background:var(--bg);padding:90px 20px}
.container{max-width:1200px;margin:auto}
.plans{display:grid;grid-template-columns:repeat(auto-fit,minmax(340px,1fr));gap:40px;margin-top:60px;justify-content:center}
.plan{background:var(--card);border-radius:32px;border:1px solid var(--border);padding:44px;display:flex;flex-direction:column;position:relative}
.plan.featured{border:2px solid var(--primary);box-shadow:0 25px 50px rgba(0,0,0,.08);transform:scale(1.03)}
.badge{position:absolute;top:-16px;right:28px;background:var(--primary);color:#fff;padding:7px 16px;border-radius:999px;font-size:12px;font-weight:800}
.price{margin-top:22px;font-size:46px;font-weight:800;color:var(--primary)}
.price span{font-size:16px;font-weight:600;color:var(--muted)}
.features{margin-top:30px;display:grid;gap:14px;flex:1}
.features li{list-style:none;display:flex;gap:10px;font-size:15px}
.features li::before{content:"‚úî";color:var(--primary);font-weight:800}
footer{border-top:1px solid var(--border);padding:70px 20px}
.footer{max-width:1200px;margin:auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:40px}
@media(max-width:900px){
  nav,.actions{display:none}
  .hero h1{font-size:36px}
}
</style>
</head>

<body>

<header>
  <div class="header">
    <div class="logo">AGENDA CLENA</div>
    <nav>
      <a href="index.html">In√≠cio</a>
      <a href="loja.html">Para Sal√µes</a>
      <a href="cliente.html">Para Clientes</a>
      <a href="planos.html">Planos</a>
    </nav>
    <div class="actions">
      <a href="login.html"><button class="btn btn-outline">Entrar</button></a>
      <a href="cadastro.html"><button class="btn btn-primary">Teste gr√°tis</button></a>
    </div>
  </div>
</header>

<section class="hero">
  <h1>Plano √∫nico, <span>completo e sem surpresas</span></h1>
  <p>Assine e tenha acesso a tudo para organizar e crescer seu neg√≥cio.</p>
</section>

<section class="section">
  <div class="container">
    <div class="plans">
      <div class="plan featured">
        <div class="badge">PROMO√á√ÉO VITAL√çCIA</div>

        <div class="price">R$ 9,90 <span>/m√™s</span></div>

        <ul class="features">
          <li>Loja online</li>
          <li>Agendamentos 24h</li>
          <li>PDV e estoque</li>
          <li>Carteira de clientes</li>
          <li>Fideliza√ß√£o</li>
        </ul>

        <button class="btn btn-primary" onclick="assinarPlano()">Assinar agora</button>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="footer">
    <div><h4>Institucional</h4></div>
    <div><h4>Sistema</h4></div>
    <div><h4>Acesso</h4></div>
  </div>
</footer>

<script>
// üîê Simula√ß√£o: aqui entra sua l√≥gica real de sess√£o
// Exemplo real: window.user vindo do Supabase Auth
window.user = window.user || null;

async function assinarPlano(){

  // 1Ô∏è‚É£ N√£o logado ‚Üí vai para cadastro com contexto
  if(!window.user){
    window.location.href = "cadastro.html?from=planos";
    return;
  }

  // 2Ô∏è‚É£ Logado ‚Üí cria assinatura
  const res = await fetch('/api/create-subscription', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({
      user_id: user.id,
      email: user.email
    })
  });

  const data = await res.json();

  if(data.ticket_url){
    window.location.href = data.ticket_url;
  }else{
    alert("Erro ao iniciar pagamento");
  }
}

// 3Ô∏è‚É£ Voltou do cadastro? Assina sozinho
const params = new URLSearchParams(window.location.search);
if(params.get("autoAssinar") === "1"){
  assinarPlano();
}
</script>

</body>
</html>
